---
title: DevOps e Automatiza√ß√£o
description: Cultura DevOps e os tr√™s pilares de um projeto de Software.
date: "2020-04-27"
published: true
---

Hoje vivemos em uma das melhores √©pocas da hist√≥ria para se trabalhar com ci√™ncias da computa√ß√£o. Ferramentas, linguagens, processos e capacidade de m√°quinas n√£o parece ser mais o mesmo problema que enfrentavam os desenvolvedores e desenvolvedoras do s√©culo passado.

Uma das melhorias que apareceu nos √∫ltimos anos foi o provisionamento de servidores atrav√©s da nuvem, melhor conhecido como Cloud Computing. Cada vez fica mais f√°cil criar recursos na nuvem e permite que os times se preocupem mais com o desenvolvimento e menos em "como implantar o sistema". Claro, isso n√£o √© v√°lido para todos os projetos, mas em termos gerais, melhorou muito para os desenvolvedores e desenvolvedoras que se aventuram a fazer prot√≥tipos de aplica√ß√µes e simplesmente querem ver um resultado r√°pido disponibilizado na internet.

Uma das √°reas relacionadas com Cloud Computing √© um termo denominado DevOps. Junto com os servi√ßos na nuvem, vem de m√£o dada um termo chamado DevOps. Muitas pessoas definem DevOps de diversas maneiras, e hoje eu vou contar como eu o entendo.

## DevOps como cultura

DevOps em si, √© um termo bastante utilizado no mercado de TI, mas n√£o h√° uma utiliza√ß√£o padr√£o para o mesmo.

Por exemplo, DevOps √© utilizado para referir-se a perfis de trabalho (_DevOps Engineer_), √°reas dentro de uma empresa que substituem aquilo que conhecemos como Infraestrutura (_Devops Area_) ou ent√£o como uma cultura mesmo. No entanto, DevOps √© um conceito mais de alto n√≠vel e torna-se algo dif√≠cil de explicar.

> Eu entendo DevOps mais como uma cultura e um conjunto de pr√°ticas adotadas dentro de um time que permitem atingir um ciclo de vida mais eficiente em um projeto de desenvolvimento de Software.

## DEV VS OPS

Voc√™ j√° deve ter ouvido que o time de Desenvolvimento (_DEV_) e o time de Opera√ß√µes (_OPS_) sempre tiveram um atrito. Muitos descrevem essa rela√ß√£o como dois times por um grande muro. Assim que um desenvolvedor finaliza uma tarefa, joga-se uma mensagem por cima do muro para o time de _OPS_, e assim que o time de _OPS_ analisa a qualidade do c√≥digo ou ent√£o da vers√£o final de um pacote de software, normalmente chamado de _bundle_, joga-se novamente uma mensagem por cima do muro para o time de _DEV_, rejeitando as mudan√ßas implementadas, e torna-se uma briga eterna gerada porque o time de desenvolvimento n√£o se preocupou com as vari√°veis que afetariam a implanta√ß√£o e vice-versa.

> DevOps como cultura muda esse cen√°rio de atrito, convertendo-o em um cen√°rio mais harm√¥nico. Afinal, todos jogam no mesmo time e √© de interesse comum tanto a qualidade do c√≥digo escrito assim como a disponibiliza√ß√£o do mesmo, atrav√©s de _Pipelines_ de integra√ß√£o continua.

As melhorias na √°rea de infraestrutura facilitaram a intera√ß√£o por parte do time _DEV_ nos quesitos do time de _OPS_. Com as novas camadas de abstra√ß√£o, qualquer integrante de um time pode monitorar, visualizar e analisar problemas que ocorrem em produ√ß√£o, e tamb√©m gerar valor de uma forma mais r√°pida e eficiente.

> Como isso ajuda no desenvolvimento de um projeto de Software?

Na minha opini√£o, existem 3 fatores que v√£o levar seu produto ao sucesso:

1. Documenta√ß√£o
2. Processos de Integra√ß√£o e Entrega Continua (CI/CD) (pr√°ticas DevOps)
3. Reduzir depend√™ncias

Se voc√™ garantir que esses tr√™s pilares funcionam e est√£o coordenados na sua empresa, voc√™ j√° est√° a caminho do sucesso do seu projeto.

## 1. Documenta√ß√£o

Documenta√ß√£o √© algo que poucos querem fazer e poucos d√£o valor. Em empresas que possuem uma estrutura remota, como √© meu caso, a documenta√ß√£o torna-se um aliado de muita relev√¢ncia dado que os integrantes do time trabalham em fusos hor√°rios diferentes e nem sempre existe uma pessoa que saiba tudo dentro de um time. Seu time deve ter muito claro qual lugar procurar quando algum erro acontece. A defini√ß√£o de processos, planos de a√ß√£o contra eventualidades, e a pr√≥pria descri√ß√£o do funcionamento do sistema deve ter f√°cil acesso e ser do conhecimento de todos os integrantes do time.

Eu uso [Notion](https://www.notion.so/). Particularmente, acho uma ferramenta muito f√°cil de usar, com muitos elementos visuais que facilitam o armazenamento de informa√ß√£o em diferentes formatos.

Sugiro uma estrutura b√°sica de documenta√ß√£o assim:

- Infrastructure: Documenta√ß√£o de scripts e rotinas que mant√©m a infraestrutura.
- Frontend: Documenta√ß√£o de componentes do frontend. √â bom ter essa documenta√ß√£o junto como um storybook.
- Backend: Documenta√ß√£o de rotinas no backend
- Conventions: Conven√ß√µes do seu projeto. Aqui √© interessante colocar todas as regras que voc√™s usam no seu projeto
- Onboarding: Todo material necess√°rio para os novos funcion√°rios
- Design Docs: Toda documenta√ß√£o de design do seu projeto
- Application Docs: Documenta√ß√£o da sua aplica√ß√£o. Aqui √© interessante ter pastas separando a documenta√ß√£o da API, fluxo de dados, integra√ß√µes, etc.

## 2. Processos de Integra√ß√£o e Entrega Continua (CI/CD)

Hoje √© bastante comum a forma√ß√£o de times pequenos. Empresas como a Amazon usam uma regra chamada [The Two Pizza Rule](http://blog.idonethis.com/two-pizza-team/), que consiste em que o tamanho de um time dever ser aquele que pode ser alimentado com duas pizzas. Acredita-se que Jeff Bezos foi o primeiro a utilizar esse termo e aplicar ele dentro dos times da Amazon.

Empresas de porte m√©dio e pequeno contam com um n√∫mero limitado de colaboradores que acabam tendo m√∫ltiplas responsabilidades dentro de um time. √â muito importante que os desenvolvedores e desenvolvedoras foquem no que agrega mais valor para empresa: O c√≥digo. A filosofia de v√°rias empresas como Heroku, Zeit, Netlify, entre outras, √© reduzir a complexidade da implanta√ß√£o de um software na nuvem, e permitir que todo mundo seja capaz de escrever uma aplica√ß√£o e disponibiliz√°-la rapidamente.

Essa facilidade se logra atrav√©s de processos de Integra√ß√£o continua (CI) e Entrega continua (CD), usando ferramentas como Jenkins e AWS Pipeline. Existe tamb√©m a possibilidade de voc√™ escrever a sua infraestrutura como recursos escritos em forma de c√≥digo, usando ferramentas/linguagens como Terraform, CloudFormation, entre outras.

PS. N√£o tenho certeza se podemos considerar Terraform e Cloudformation como linguagens, mas me atreveria a dizer que s√£o.

Ap√≥s a defini√ß√£o do processo de implanta√ß√£o, basta um click para gerar uma nova vers√£o de uma aplica√ß√£o ou ent√£o simplesmente um _push_ em uma _branch_ espec√≠fica para acionar a nova implanta√ß√£o. A automatiza√ß√£o desses processos permite entregar valor para o cliente _R√ÅPIDO_!

## 3. Reduzir depend√™ncias

Quando uso a frase "Reduzir depend√™ncias" me refiro explicitamente √† pessoas. Um termo que expliquei em um dos artigos anteriores, _THE BUS FACTOR_, baseia-se em um indicador que mede quanto voc√™ depende de uma pessoa espec√≠fica no seu time.

> Qu√£o concentrado √© o conhecimento no seu time?

Reduzir a depend√™ncia de conhecimento √© muito importante, e cabe a voc√™ documentar e criar os processos necess√°rios para que todo mundo possa escrever c√≥digo, saber o que fazer se acontece um imprevisto, e saber como gerar uma nova vers√£o da sua aplica√ß√£o. Voc√™ n√£o pode depender s√≥ de uma pessoa para que os itens que acabo de mencionar sejam acionados.

## Como posso fazer isso na pr√°tica

Em teoria, tudo isso funciona muito bem. Mas na pr√°tica, nem sempre √© f√°cil de implementar. Eu me fa√ßo uma pergunta todo dia:

> O que posso fazer para facilitar a vida dos integrantes do meu time?

Pensando nisso, eu crio ferramentas que automatizam parte do meu trabalho, documento a forma em que qualquer pessoa pode utiliz√°-la, e encorajo cada integrante do time a que utilize as ferramentas que desenvolvemos internamente na empresa. Isso reduz as depend√™ncias de conhecimento e aumenta a nossa produtividade e a velocidade com que entregamos novas funcionalidades.

Para dar um exemplo mais espec√≠fico, desenvolvi recentemente um processo de _release_ de novas vers√µes de maneira autom√°tica, e funciona assim:

1. Uma pessoa trabalha em uma tarefa XYZ e deve trabalhar em uma _branch_ do git separada da _branch_ DEV.

2. Ap√≥s finalizar a tarefa, cria-se um _pull request_. √â muito importante a utiliza√ß√£o de nomes apropriados, que informem o que foi realizado na tarefa espec√≠fica.

3. Os itens 1 e 2 acontecem v√°rias vezes durante cada _sprint_. N√≥s geramos um release ap√≥s cada _sprint_, que dura uma semana. A frequ√™ncia n√£o interessa no fim das contas.

4. Ap√≥s finalizar a _sprint_, uma pessoa √© respons√°vel por fazer merge do c√≥digo que est√° em _dev_ no _master_ e criar um _pull request_ com o formato "RELEASE $NUMERO_DA_VERS√ÉO". Esse formato de nome √© muito importante, pois ser√° usado pelo script.

5. Executamos um script em Python que busca todos os _pull requests_ aceitos desde o √∫ltimo _pull request_ cujo nome cont√©m a palavra `RELEASE`, e monta uma tabela em formato Markdown contendo o nome do _pull request_, o ID, e o link. Finalmente, o script gera uma _tag_ e um _release_ desde a _branch_ `master`. Isso tudo, com um click.

Publiquei no meu reposit√≥rio o script que automatiza esse processo. Eu gastava anteriormente ao redor de 10 a 15 minutos para gerar uma nova _release_, criar uma _tag_ na branch master, e fazer uma lista com todos os itens implementados na _release_ atual. Agora em quest√£o de segundos, consigo fazer isso.

Confira a descri√ß√£o detalhada do processo e o script que faz isso para voc√™ [nesse link](https://github.com/jprivillaso/python_release_and_tag).

## Conclus√£o

Boas pr√°ticas s√£o a funda√ß√£o do seu projeto. Convido-o a que se fa√ßa as seguintes perguntas:

1. Qual parte do meu trabalho √© repetitiva ?
2. Como posso gastar menos tempo nessas tarefas repetitivas ?
3. O que posso fazer para que meu trabalho seja menos propenso a erros e garantir a qualidade do meu projeto ?

A resposta disso √© automatiza√ß√£o, documenta√ß√£o e uma cultura DevOps.

O que voc√™ acha disso? Na sua empresa tamb√©m implementam pr√°ticas desse tipo?

## Uma pequena ajuda

Se achou algum erro de portugu√™s üìô, por favor me avise. N√£o sou nativo e sempre passa alguma coisa batida üòÉ

Gostou ? Compartilhe e comente!
